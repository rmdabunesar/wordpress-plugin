(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.domReady;var n=e.n(t);const a=window.wp.element,s=window.wp.components,l=window.wp.data,o=window.wp.coreData,i=window.ReactJSXRuntime,r=({value:e,onChange:t})=>{const n=(0,l.useSelect)(e=>e(o.store).getEntityRecords("postType","page",{per_page:-1,orderby:"title",order:"asc",context:"embed"}));if(!n)return(0,i.jsx)(s.Spinner,{});const a=[{label:"Select a page",value:0},...n.map(e=>({label:e.title.rendered,value:e.id}))];return(0,i.jsx)(s.SelectControl,{label:"Booking Page",value:e,options:a,onChange:e=>t(parseInt(e))})},d=({settings:e,update:t})=>(0,i.jsxs)("div",{style:{maxWidth:"300px"},children:[(0,i.jsx)(s.ToggleControl,{label:"Enable Booking System",checked:e.booking_enabled||!1,onChange:e=>t("booking_enabled",e)}),(0,i.jsx)(s.SelectControl,{label:"Currency",value:e.currency_code,options:[{label:"US Dollar (USD)",value:"USD"},{label:"Euro (EUR)",value:"EUR"},{label:"Indian Rupee (INR)",value:"INR"}],onChange:e=>t("currency_code",e)}),(0,i.jsx)(s.SelectControl,{label:"Currency Symbol Position",value:e.currency_position,options:[{label:"Left ($99)",value:"left"},{label:"Right (99$)",value:"right"}],onChange:e=>t("currency_position",e)}),(0,i.jsx)(s.TextControl,{label:"Doctors Per Page",type:"number",value:e.consultants_per_page,onChange:e=>t("consultants_per_page",parseInt(e,10))}),(0,i.jsx)(r,{value:e.booking_page_id,onChange:e=>t("booking_page_id",parseInt(e,10))})]}),c=({settings:e,update:t})=>(0,i.jsxs)("div",{style:{maxWidth:"300px"},children:[(0,i.jsx)(s.TextControl,{label:"Default Slot Duration (minutes)",type:"number",value:e.default_slot_duration||"",onChange:e=>t("default_slot_duration",parseInt(e,10))}),(0,i.jsx)(s.SelectControl,{label:"Slot Interval Type",value:e.slot_interval_type||"fixed",options:[{label:"Fixed",value:"fixed"},{label:"Flexible",value:"flexible"}],onChange:e=>t("slot_interval_type",e)})]}),u=({settings:e,update:t})=>(0,i.jsxs)("div",{style:{maxWidth:"300px"},children:[(0,i.jsx)(s.TextControl,{label:"Admin Notification Email",value:e.admin_email||"",onChange:e=>t("admin_email",e)}),(0,i.jsx)(s.TextControl,{label:"User Notification Subject",value:e.user_email_subject||"",onChange:e=>t("user_email_subject",e)})]}),p=({settings:e,apiBase:t,nonce:n})=>{const[l,o]=(0,a.useState)(!1),[r,d]=(0,a.useState)(!1);return(0,i.jsxs)("div",{style:{marginTop:"20px"},children:[(0,i.jsx)(s.Button,{isPrimary:!0,isBusy:l,disabled:l,onClick:()=>{o(!0),fetch(t,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":n},body:JSON.stringify(e)}).then(e=>e.json()).then(()=>{o(!1),d(!0)})},children:"Save Settings"}),r&&(0,i.jsx)(s.Notice,{status:"success",isDismissible:!0,onRemove:()=>d(!1),children:"Settings saved successfully!"})]})},g=({settings:e,update:t})=>(0,i.jsxs)("div",{style:{maxWidth:"300px"},children:[(0,i.jsx)(s.TextControl,{label:"AamarPay Store ID",value:e.store_id||"",onChange:e=>t("store_id",e)}),(0,i.jsx)(s.TextControl,{label:"AamarPay Signature Key",value:e.signature_key||"",onChange:e=>t("signature_key",e)}),(0,i.jsx)(s.ToggleControl,{label:"Use Sandbox Mode (Testing)",checked:"1"===e.sandbox_mode,onChange:e=>t("sandbox_mode",e?"1":"0")})]}),x=()=>{const[e,t]=(0,a.useState)({}),[n,l]=(0,a.useState)(!0),o=window.CB_DATA.apiBase,r=window.CB_DATA.nonce;(0,a.useEffect)(()=>{fetch(o,{headers:{"X-WP-Nonce":r}}).then(e=>e.json()).then(e=>{t(e),l(!1)})},[]);const x=(e,n)=>{t(t=>({...t,[e]:n}))};return n?(0,i.jsx)(s.Spinner,{}):(0,i.jsxs)("div",{className:"admin-react-wrapper",children:[(0,i.jsx)(s.TabPanel,{className:"health-visit-tabs",activeClass:"is-active",tabs:[{name:"general",title:"General",className:"tab-general"},{name:"slots",title:"Booking Slots"},{name:"notifications",title:"Notifications"},{name:"payment",title:"Payment Gateway"}],children:t=>{switch(t.name){case"general":return(0,i.jsx)(s.PanelBody,{title:"General Settings",initialOpen:!0,children:(0,i.jsx)(d,{settings:e,update:x})});case"slots":return(0,i.jsx)(s.PanelBody,{title:"Slot Settings",initialOpen:!0,children:(0,i.jsx)(c,{settings:e,update:x})});case"notifications":return(0,i.jsx)(s.PanelBody,{title:"Notification Settings",initialOpen:!0,children:(0,i.jsx)(u,{settings:e,update:x})});case"payment":return(0,i.jsx)(s.PanelBody,{title:"Payment Settings",initialOpen:!0,children:(0,i.jsx)(g,{settings:e,update:x})});default:return null}}}),(0,i.jsx)(p,{settings:e,apiBase:o,nonce:r})]})};n()(()=>{(0,a.createRoot)(document.getElementById("settings-app")).render((0,i.jsx)(x,{}))})})();